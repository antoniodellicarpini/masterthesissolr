<script>
    function on_data(data) {
        $('#results').empty();
        var level = data.ajax_level;
        alert('#'+data.clicked);
        $.each(level, function(i, item) {
            $('#urbanistica').prepend($('<div>' + item.labels + '</div>'));
            $('#urbanistica').prepend($('<div>' + item.numDocs + '</div>'));
        });
    }
</script>

<h2 #annTitle("Clusters generated by Carrot2 using the /clustering RequestHandler")>
  Hierarchy
</h2>

## For each hierarchy

<ol>
#foreach ($hierarchy in $response.response.clusterGerarchizzati)

#set($labels = $hierarchy.get('labels'))

<li>
    #foreach ($label in $labels)
    
      #if($response.response.responseHeader.get('params').size()==0)
      	#set($query = "*:*&clicked=$label")
 	  #else
 	  	#set($query = "$params.get('q')&clicked=$label")
 	  #end
 	  <a id="label" href="#" onClick="$(this).on_search('$query');">
        $label ($hierarchy.get('numDocs'))
 	  </a>
 	  <div id="urbanistica"></div>
    #end
</li>

#end   ## end for each Hierarchy
</ol>
<div id="results"></div>
